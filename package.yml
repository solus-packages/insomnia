name       : insomnia
version    : 6.3.2
release    : 6
source     :
    - https://github.com/getinsomnia/insomnia/archive/v6.3.2.tar.gz : 7a52628cef431b4e37908878d49307e2b6fbdf12f2e8601803b75982b5433a31
license    : AGPL-3.0
component  : programming.tools
summary    : Insomnia is a cross-platform REST client
description: |
    Insomnia is a cross-platform REST client
networking : yes
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(gconf-2.0)
    - pkgconfig(gtk+-2.0)
    - pkgconfig(libcurl)
    - pkgconfig(xscrnsaver)
    - pkgconfig(xtst)
    - cups-devel
    - lerna
rundeps    :
    - nodejs
build      : |
    npm run bootstrap
    npm install electron-builder
    npm run app-build
    cd packages/insomnia-app/build
    ../node_modules/.bin/electron-builder --linux dir --x64
install    : |
    install -Dm644 packages/insomnia-app/app/static/icon.png $installdir/usr/share/pixmaps/insomnia.png
    install -Dm644 $pkgfiles/insomnia.desktop $installdir/usr/share/applications/insomnia.desktop
    install -dm00644 $installdir/usr/share/insomnia
    install -dm00644 $installdir/usr/bin
    cp -R packages/insomnia-app/build/dist/linux-unpacked/* $installdir/usr/share/insomnia/
    ln -s /usr/share/insomnia/insomnia $installdir/usr/bin/insomnia
